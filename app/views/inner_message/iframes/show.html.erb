<div class="unread-count">
  <span class="badge" data-bind="text: unread, click: toggleMessageBox, css: { alert: unread()!='0' }"></span>
</div>

<div data-bind="foreach: messages, visible: showingMessageBox" class="message-list">
  <div class="conversation" data-bind="attr: {'id': 'message-'+id}">
    <div class="media" data-bind="click: $parent.markAsRead, css: {'unread': !read}">
      <small class="author"><a href="#" title="" class="strong">Jane Doe</a></small>
      <div class="media-object pull-left"><%= image_tag 'inner_message/face.png', class: "img-circle"%></div>
      <div class="media-body">
        <blockquote>
          <small class="date"><cite data-bind="text: $parent.formatTime(created_at)"></cite></small>
          <p data-bind="text: content, click: $parent.showReply"></p>
        </blockquote>
      </div>
    </div>
    <div class="reply-box">
      <textarea></textarea>
      <button data-bind="click: $parent.reply">回复</button>
      <button data-bind="click: $parent.cancelReply">取消</button>
    </div>
  </div>
</div>